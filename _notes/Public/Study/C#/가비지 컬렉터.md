
**값 타입(Value Type)**:

- `struct`, `int`, `bool`
    
- **스택**에 저장
    
- 메서드 종료 시 **자동으로 해제**

**참조 타입(Reference Type)**:

- `class`, `string` , `interface`, `delegate`
    
- **힙**에 저장, **가비지 컬렉터(GC)**가 관리

### **GC의 루트(Root)**

- **스택 변수**: 현재 실행 중인 메서드의 지역 변수 및 매개변수.
    
- **정적 변수**: 프로그램이 끝날 때까지 존재하는 변수.
    
- **CPU 레지스터**: CPU가 현재 처리하는 객체에 대한 참조.
    
- **GC 핸들**: C++ 같은 비관리 코드가 관리 객체를 참조할 때 사용되는 특별한 포인터.
    
- **파이널라이저 큐**: 파이널라이저가 있는 객체가 GC 대기 중일 때 임시로 머무는 목록.
---

### **GC의 마킹**

각 루트가 참조하는 객체 그리고 그 객체가 참조하는 객체를 추적한 뒤 참조 타입인 경우 마킹한다.
### **GC의 스위핑**

힙 메모리 전체를 스캔한뒤 마킹되지 않은 객체를 죽은 객체로 판단하고 사용 가능한 메모리 목록에 해당 공간의 주소를 추가한다.

### **GC의 압축

메모리 단편화 문제를 해결하기 위해, 살아있는 객체들을 
한쪽으로 몰아서 빈 공간을 하나의 연속된 블록으로 만든다. 

### 세대별 GC (Generational GC)

#### **핵심 원리**

> "대부분의 객체는 생성된 직후에 사라진다."

이 가설을 바탕으로, GC는 힙을 **3개의 논리적인 세대**로 나눈다.

- **0세대**: 새로 생성된 객체가 위치하는 공간. 크기가 작고, GC가 **가장 자주 청소**한다.
    
- **1세대**: 0세대 청소에서 살아남은 객체가 승격되는 공간.
    
- **2세대**: 1세대 청소에서도 살아남은, 수명이 매우 긴 객체가 위치하는 공간. 크기가 가장 크고, **가장 드물게 청소**된다.

#### **동작 방식**

1. **우선 0세대만 청소**: GC는 대부분의 경우 0세대만 빠르게 청소한다.
    
2. **승격(Promotion)**: 0세대 청소에서 살아남은 객체는 **메모리 복사**를 통해 1세대로 이동한다.
    
3. **최후의 수단**: 0세대와 1세대 청소로도 메모리가 부족할 때만 2세대까지 포함한 **전체 GC**를 실행한다.
